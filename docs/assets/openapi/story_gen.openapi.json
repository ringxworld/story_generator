{
  "components": {
    "schemas": {
      "ApiRootResponse": {
        "description": "Describes currently available API capabilities and runtime mode.",
        "properties": {
          "auth": {
            "const": "bearer-token",
            "default": "bearer-token",
            "title": "Auth",
            "type": "string"
          },
          "endpoints": {
            "items": {
              "type": "string"
            },
            "title": "Endpoints",
            "type": "array"
          },
          "name": {
            "default": "story_gen",
            "title": "Name",
            "type": "string"
          },
          "persistence": {
            "const": "sqlite",
            "default": "sqlite",
            "title": "Persistence",
            "type": "string"
          },
          "stage": {
            "const": "local-preview",
            "default": "local-preview",
            "title": "Stage",
            "type": "string"
          }
        },
        "title": "ApiRootResponse",
        "type": "object"
      },
      "AuthLoginRequest": {
        "additionalProperties": false,
        "description": "Authenticate and request an access token.",
        "properties": {
          "email": {
            "maxLength": 320,
            "minLength": 5,
            "title": "Email",
            "type": "string"
          },
          "password": {
            "format": "password",
            "maxLength": 200,
            "minLength": 8,
            "title": "Password",
            "type": "string",
            "writeOnly": true
          }
        },
        "required": [
          "email",
          "password"
        ],
        "title": "AuthLoginRequest",
        "type": "object"
      },
      "AuthRegisterRequest": {
        "additionalProperties": false,
        "description": "Register a user account for local/dev story editing.",
        "properties": {
          "display_name": {
            "maxLength": 120,
            "minLength": 1,
            "title": "Display Name",
            "type": "string"
          },
          "email": {
            "maxLength": 320,
            "minLength": 5,
            "title": "Email",
            "type": "string"
          },
          "password": {
            "format": "password",
            "maxLength": 200,
            "minLength": 8,
            "title": "Password",
            "type": "string",
            "writeOnly": true
          }
        },
        "required": [
          "email",
          "password",
          "display_name"
        ],
        "title": "AuthRegisterRequest",
        "type": "object"
      },
      "AuthTokenResponse": {
        "additionalProperties": false,
        "description": "Bearer token payload used by web and Python clients.",
        "properties": {
          "access_token": {
            "title": "Access Token",
            "type": "string"
          },
          "expires_at_utc": {
            "title": "Expires At Utc",
            "type": "string"
          },
          "token_type": {
            "default": "bearer",
            "pattern": "^bearer$",
            "title": "Token Type",
            "type": "string"
          }
        },
        "required": [
          "access_token",
          "expires_at_utc"
        ],
        "title": "AuthTokenResponse",
        "type": "object"
      },
      "ChapterBlock": {
        "additionalProperties": false,
        "description": "Chapter unit that captures ordering and narrative dependencies.",
        "properties": {
          "draft_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Draft Text"
          },
          "key": {
            "maxLength": 120,
            "minLength": 1,
            "title": "Key",
            "type": "string"
          },
          "objective": {
            "maxLength": 3000,
            "minLength": 1,
            "title": "Objective",
            "type": "string"
          },
          "participating_characters": {
            "items": {
              "type": "string"
            },
            "title": "Participating Characters",
            "type": "array"
          },
          "prerequisites": {
            "items": {
              "type": "string"
            },
            "title": "Prerequisites",
            "type": "array"
          },
          "required_themes": {
            "items": {
              "type": "string"
            },
            "title": "Required Themes",
            "type": "array"
          },
          "title": {
            "maxLength": 300,
            "minLength": 1,
            "title": "Title",
            "type": "string"
          }
        },
        "required": [
          "key",
          "title",
          "objective"
        ],
        "title": "ChapterBlock",
        "type": "object"
      },
      "CharacterBlock": {
        "additionalProperties": false,
        "description": "Character unit used in blueprint-driven story planning.",
        "properties": {
          "key": {
            "maxLength": 120,
            "minLength": 1,
            "title": "Key",
            "type": "string"
          },
          "motivation": {
            "maxLength": 2000,
            "minLength": 1,
            "title": "Motivation",
            "type": "string"
          },
          "relationships": {
            "additionalProperties": {
              "type": "string"
            },
            "title": "Relationships",
            "type": "object"
          },
          "role": {
            "maxLength": 200,
            "minLength": 1,
            "title": "Role",
            "type": "string"
          },
          "voice_markers": {
            "items": {
              "type": "string"
            },
            "title": "Voice Markers",
            "type": "array"
          }
        },
        "required": [
          "key",
          "role",
          "motivation"
        ],
        "title": "CharacterBlock",
        "type": "object"
      },
      "DashboardArcPointResponse": {
        "additionalProperties": false,
        "description": "Arc chart point payload.",
        "properties": {
          "label": {
            "title": "Label",
            "type": "string"
          },
          "lane": {
            "title": "Lane",
            "type": "string"
          },
          "stage": {
            "title": "Stage",
            "type": "string"
          },
          "value": {
            "title": "Value",
            "type": "number"
          }
        },
        "required": [
          "lane",
          "stage",
          "value",
          "label"
        ],
        "title": "DashboardArcPointResponse",
        "type": "object"
      },
      "DashboardDrilldownResponse": {
        "additionalProperties": false,
        "description": "Drilldown payload for one item id.",
        "properties": {
          "content": {
            "title": "Content",
            "type": "string"
          },
          "evidence_segment_ids": {
            "items": {
              "type": "string"
            },
            "title": "Evidence Segment Ids",
            "type": "array"
          },
          "item_id": {
            "title": "Item Id",
            "type": "string"
          },
          "item_type": {
            "title": "Item Type",
            "type": "string"
          },
          "title": {
            "title": "Title",
            "type": "string"
          }
        },
        "required": [
          "item_id",
          "item_type",
          "title",
          "content",
          "evidence_segment_ids"
        ],
        "title": "DashboardDrilldownResponse",
        "type": "object"
      },
      "DashboardGraphEdgeResponse": {
        "additionalProperties": false,
        "description": "Interactive graph edge payload.",
        "properties": {
          "relation": {
            "title": "Relation",
            "type": "string"
          },
          "source": {
            "title": "Source",
            "type": "string"
          },
          "target": {
            "title": "Target",
            "type": "string"
          },
          "weight": {
            "title": "Weight",
            "type": "number"
          }
        },
        "required": [
          "source",
          "target",
          "relation",
          "weight"
        ],
        "title": "DashboardGraphEdgeResponse",
        "type": "object"
      },
      "DashboardGraphExportResponse": {
        "additionalProperties": false,
        "description": "Graph export payload.",
        "properties": {
          "format": {
            "const": "svg",
            "default": "svg",
            "title": "Format",
            "type": "string"
          },
          "svg": {
            "title": "Svg",
            "type": "string"
          }
        },
        "required": [
          "svg"
        ],
        "title": "DashboardGraphExportResponse",
        "type": "object"
      },
      "DashboardGraphNodeResponse": {
        "additionalProperties": false,
        "description": "Interactive graph node payload.",
        "properties": {
          "group": {
            "title": "Group",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "string"
          },
          "label": {
            "title": "Label",
            "type": "string"
          },
          "layout_x": {
            "anyOf": [
              {
                "maximum": 4000.0,
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Layout X"
          },
          "layout_y": {
            "anyOf": [
              {
                "maximum": 4000.0,
                "minimum": 0.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Layout Y"
          },
          "stage": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stage"
          }
        },
        "required": [
          "id",
          "label",
          "group"
        ],
        "title": "DashboardGraphNodeResponse",
        "type": "object"
      },
      "DashboardGraphPngExportResponse": {
        "additionalProperties": false,
        "description": "Graph PNG export payload.",
        "properties": {
          "format": {
            "const": "png",
            "default": "png",
            "title": "Format",
            "type": "string"
          },
          "png_base64": {
            "title": "Png Base64",
            "type": "string"
          }
        },
        "required": [
          "png_base64"
        ],
        "title": "DashboardGraphPngExportResponse",
        "type": "object"
      },
      "DashboardGraphResponse": {
        "additionalProperties": false,
        "description": "Graph payload for interactive rendering.",
        "properties": {
          "edges": {
            "items": {
              "$ref": "#/components/schemas/DashboardGraphEdgeResponse"
            },
            "title": "Edges",
            "type": "array"
          },
          "nodes": {
            "items": {
              "$ref": "#/components/schemas/DashboardGraphNodeResponse"
            },
            "title": "Nodes",
            "type": "array"
          }
        },
        "required": [
          "nodes",
          "edges"
        ],
        "title": "DashboardGraphResponse",
        "type": "object"
      },
      "DashboardOverviewResponse": {
        "additionalProperties": false,
        "description": "Big-picture dashboard card payload.",
        "properties": {
          "beats_count": {
            "minimum": 0.0,
            "title": "Beats Count",
            "type": "integer"
          },
          "confidence_floor": {
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence Floor",
            "type": "number"
          },
          "events_count": {
            "minimum": 0.0,
            "title": "Events Count",
            "type": "integer"
          },
          "macro_thesis": {
            "title": "Macro Thesis",
            "type": "string"
          },
          "quality_passed": {
            "title": "Quality Passed",
            "type": "boolean"
          },
          "themes_count": {
            "minimum": 0.0,
            "title": "Themes Count",
            "type": "integer"
          },
          "title": {
            "title": "Title",
            "type": "string"
          }
        },
        "required": [
          "title",
          "macro_thesis",
          "confidence_floor",
          "quality_passed",
          "events_count",
          "beats_count",
          "themes_count"
        ],
        "title": "DashboardOverviewResponse",
        "type": "object"
      },
      "DashboardPngExportResponse": {
        "additionalProperties": false,
        "description": "PNG export payload.",
        "properties": {
          "format": {
            "const": "png",
            "default": "png",
            "title": "Format",
            "type": "string"
          },
          "png_base64": {
            "title": "Png Base64",
            "type": "string"
          }
        },
        "required": [
          "png_base64"
        ],
        "title": "DashboardPngExportResponse",
        "type": "object"
      },
      "DashboardSvgExportResponse": {
        "additionalProperties": false,
        "description": "SVG export payload.",
        "properties": {
          "format": {
            "const": "svg",
            "default": "svg",
            "title": "Format",
            "type": "string"
          },
          "svg": {
            "title": "Svg",
            "type": "string"
          }
        },
        "required": [
          "svg"
        ],
        "title": "DashboardSvgExportResponse",
        "type": "object"
      },
      "DashboardThemeHeatmapCellResponse": {
        "additionalProperties": false,
        "description": "Theme heatmap cell payload.",
        "properties": {
          "intensity": {
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Intensity",
            "type": "number"
          },
          "stage": {
            "title": "Stage",
            "type": "string"
          },
          "theme": {
            "title": "Theme",
            "type": "string"
          }
        },
        "required": [
          "theme",
          "stage",
          "intensity"
        ],
        "title": "DashboardThemeHeatmapCellResponse",
        "type": "object"
      },
      "DashboardTimelineLaneResponse": {
        "additionalProperties": false,
        "description": "Timeline lane payload used by visualization UIs.",
        "properties": {
          "items": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Items",
            "type": "array"
          },
          "lane": {
            "title": "Lane",
            "type": "string"
          }
        },
        "required": [
          "lane",
          "items"
        ],
        "title": "DashboardTimelineLaneResponse",
        "type": "object"
      },
      "EssayBlueprint-Input": {
        "additionalProperties": false,
        "description": "Portable essay-mode contract for deterministic quality checks.",
        "properties": {
          "policy": {
            "$ref": "#/components/schemas/EssayPolicy"
          },
          "prompt": {
            "maxLength": 8000,
            "minLength": 1,
            "title": "Prompt",
            "type": "string"
          },
          "rubric": {
            "items": {
              "type": "string"
            },
            "title": "Rubric",
            "type": "array"
          }
        },
        "required": [
          "prompt",
          "policy"
        ],
        "title": "EssayBlueprint",
        "type": "object"
      },
      "EssayBlueprint-Output": {
        "additionalProperties": false,
        "description": "Portable essay-mode contract for deterministic quality checks.",
        "properties": {
          "policy": {
            "$ref": "#/components/schemas/EssayPolicy"
          },
          "prompt": {
            "maxLength": 8000,
            "minLength": 1,
            "title": "Prompt",
            "type": "string"
          },
          "rubric": {
            "items": {
              "type": "string"
            },
            "title": "Rubric",
            "type": "array"
          }
        },
        "required": [
          "prompt",
          "policy"
        ],
        "title": "EssayBlueprint",
        "type": "object"
      },
      "EssayCreateRequest": {
        "additionalProperties": false,
        "description": "Create one essay workspace for the authenticated user.",
        "properties": {
          "blueprint": {
            "$ref": "#/components/schemas/EssayBlueprint-Input"
          },
          "draft_text": {
            "default": "",
            "maxLength": 120000,
            "title": "Draft Text",
            "type": "string"
          },
          "title": {
            "maxLength": 300,
            "minLength": 1,
            "title": "Title",
            "type": "string"
          }
        },
        "required": [
          "title",
          "blueprint"
        ],
        "title": "EssayCreateRequest",
        "type": "object"
      },
      "EssayEvaluateRequest": {
        "additionalProperties": false,
        "description": "Evaluate persisted essay with optional override draft text.",
        "properties": {
          "draft_text": {
            "anyOf": [
              {
                "maxLength": 120000,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Draft Text"
          }
        },
        "title": "EssayEvaluateRequest",
        "type": "object"
      },
      "EssayEvaluationResponse": {
        "additionalProperties": false,
        "description": "Evaluation output for one essay draft.",
        "properties": {
          "checks": {
            "items": {
              "$ref": "#/components/schemas/EssayQualityCheckResponse"
            },
            "title": "Checks",
            "type": "array"
          },
          "citation_count": {
            "minimum": 0.0,
            "title": "Citation Count",
            "type": "integer"
          },
          "essay_id": {
            "title": "Essay Id",
            "type": "string"
          },
          "owner_id": {
            "title": "Owner Id",
            "type": "string"
          },
          "passed": {
            "title": "Passed",
            "type": "boolean"
          },
          "required_citations": {
            "minimum": 0.0,
            "title": "Required Citations",
            "type": "integer"
          },
          "score": {
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Score",
            "type": "number"
          },
          "word_count": {
            "minimum": 0.0,
            "title": "Word Count",
            "type": "integer"
          }
        },
        "required": [
          "essay_id",
          "owner_id",
          "passed",
          "score",
          "word_count",
          "citation_count",
          "required_citations",
          "checks"
        ],
        "title": "EssayEvaluationResponse",
        "type": "object"
      },
      "EssayPolicy": {
        "additionalProperties": false,
        "description": "Quality policy enforcing draft shape for essay mode.",
        "properties": {
          "audience": {
            "maxLength": 300,
            "minLength": 1,
            "title": "Audience",
            "type": "string"
          },
          "banned_phrases": {
            "items": {
              "type": "string"
            },
            "title": "Banned Phrases",
            "type": "array"
          },
          "max_words": {
            "default": 1200,
            "maximum": 20000.0,
            "minimum": 150.0,
            "title": "Max Words",
            "type": "integer"
          },
          "min_words": {
            "default": 600,
            "maximum": 10000.0,
            "minimum": 100.0,
            "title": "Min Words",
            "type": "integer"
          },
          "required_citations": {
            "default": 0,
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Required Citations",
            "type": "integer"
          },
          "required_sections": {
            "items": {
              "$ref": "#/components/schemas/EssaySectionRequirement"
            },
            "title": "Required Sections",
            "type": "array"
          },
          "thesis_statement": {
            "maxLength": 1000,
            "minLength": 1,
            "title": "Thesis Statement",
            "type": "string"
          },
          "tone": {
            "maxLength": 200,
            "minLength": 1,
            "title": "Tone",
            "type": "string"
          }
        },
        "required": [
          "thesis_statement",
          "audience",
          "tone"
        ],
        "title": "EssayPolicy",
        "type": "object"
      },
      "EssayQualityCheckResponse": {
        "additionalProperties": false,
        "description": "One quality finding from essay evaluation.",
        "properties": {
          "code": {
            "title": "Code",
            "type": "string"
          },
          "message": {
            "title": "Message",
            "type": "string"
          },
          "severity": {
            "enum": [
              "error",
              "warning"
            ],
            "title": "Severity",
            "type": "string"
          }
        },
        "required": [
          "code",
          "severity",
          "message"
        ],
        "title": "EssayQualityCheckResponse",
        "type": "object"
      },
      "EssayResponse": {
        "additionalProperties": false,
        "description": "Essay payload returned by API.",
        "properties": {
          "blueprint": {
            "$ref": "#/components/schemas/EssayBlueprint-Output"
          },
          "created_at_utc": {
            "title": "Created At Utc",
            "type": "string"
          },
          "draft_text": {
            "title": "Draft Text",
            "type": "string"
          },
          "essay_id": {
            "title": "Essay Id",
            "type": "string"
          },
          "owner_id": {
            "title": "Owner Id",
            "type": "string"
          },
          "title": {
            "title": "Title",
            "type": "string"
          },
          "updated_at_utc": {
            "title": "Updated At Utc",
            "type": "string"
          }
        },
        "required": [
          "essay_id",
          "owner_id",
          "title",
          "blueprint",
          "draft_text",
          "created_at_utc",
          "updated_at_utc"
        ],
        "title": "EssayResponse",
        "type": "object"
      },
      "EssaySectionRequirement": {
        "additionalProperties": false,
        "description": "Expected section contract for a structured essay.",
        "properties": {
          "key": {
            "maxLength": 120,
            "minLength": 1,
            "title": "Key",
            "type": "string"
          },
          "min_paragraphs": {
            "default": 1,
            "maximum": 10.0,
            "minimum": 1.0,
            "title": "Min Paragraphs",
            "type": "integer"
          },
          "purpose": {
            "maxLength": 1000,
            "minLength": 1,
            "title": "Purpose",
            "type": "string"
          },
          "required_terms": {
            "items": {
              "type": "string"
            },
            "title": "Required Terms",
            "type": "array"
          }
        },
        "required": [
          "key",
          "purpose"
        ],
        "title": "EssaySectionRequirement",
        "type": "object"
      },
      "EssayUpdateRequest": {
        "additionalProperties": false,
        "description": "Update one essay workspace.",
        "properties": {
          "blueprint": {
            "$ref": "#/components/schemas/EssayBlueprint-Input"
          },
          "draft_text": {
            "default": "",
            "maxLength": 120000,
            "title": "Draft Text",
            "type": "string"
          },
          "title": {
            "maxLength": 300,
            "minLength": 1,
            "title": "Title",
            "type": "string"
          }
        },
        "required": [
          "title",
          "blueprint"
        ],
        "title": "EssayUpdateRequest",
        "type": "object"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "title": "Detail",
            "type": "array"
          }
        },
        "title": "HTTPValidationError",
        "type": "object"
      },
      "HealthResponse": {
        "description": "Simple health payload used by probes.",
        "properties": {
          "service": {
            "default": "story_gen",
            "title": "Service",
            "type": "string"
          },
          "status": {
            "const": "ok",
            "default": "ok",
            "title": "Status",
            "type": "string"
          }
        },
        "title": "HealthResponse",
        "type": "object"
      },
      "IngestionStatusResponse": {
        "additionalProperties": false,
        "description": "Ingestion job status payload for dashboard polling.",
        "properties": {
          "attempt_count": {
            "minimum": 1.0,
            "title": "Attempt Count",
            "type": "integer"
          },
          "completed_at_utc": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At Utc"
          },
          "created_at_utc": {
            "title": "Created At Utc",
            "type": "string"
          },
          "dedupe_key": {
            "title": "Dedupe Key",
            "type": "string"
          },
          "idempotency_key": {
            "title": "Idempotency Key",
            "type": "string"
          },
          "issue_count": {
            "minimum": 0.0,
            "title": "Issue Count",
            "type": "integer"
          },
          "job_id": {
            "title": "Job Id",
            "type": "string"
          },
          "last_error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Error"
          },
          "owner_id": {
            "title": "Owner Id",
            "type": "string"
          },
          "retry_count": {
            "minimum": 0.0,
            "title": "Retry Count",
            "type": "integer"
          },
          "run_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Run Id"
          },
          "segment_count": {
            "minimum": 0.0,
            "title": "Segment Count",
            "type": "integer"
          },
          "source_hash": {
            "title": "Source Hash",
            "type": "string"
          },
          "source_type": {
            "title": "Source Type",
            "type": "string"
          },
          "status": {
            "enum": [
              "processing",
              "succeeded",
              "failed"
            ],
            "title": "Status",
            "type": "string"
          },
          "story_id": {
            "title": "Story Id",
            "type": "string"
          },
          "updated_at_utc": {
            "title": "Updated At Utc",
            "type": "string"
          }
        },
        "required": [
          "job_id",
          "story_id",
          "owner_id",
          "source_type",
          "idempotency_key",
          "source_hash",
          "dedupe_key",
          "status",
          "attempt_count",
          "retry_count",
          "segment_count",
          "issue_count",
          "created_at_utc",
          "updated_at_utc"
        ],
        "title": "IngestionStatusResponse",
        "type": "object"
      },
      "StoryAnalysisGateResponse": {
        "additionalProperties": false,
        "description": "Quality gate summary for analysis runs.",
        "properties": {
          "confidence_floor": {
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence Floor",
            "type": "number"
          },
          "hallucination_risk": {
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Hallucination Risk",
            "type": "number"
          },
          "passed": {
            "title": "Passed",
            "type": "boolean"
          },
          "reasons": {
            "items": {
              "type": "string"
            },
            "title": "Reasons",
            "type": "array"
          },
          "translation_quality": {
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Translation Quality",
            "type": "number"
          }
        },
        "required": [
          "passed",
          "confidence_floor",
          "hallucination_risk",
          "translation_quality"
        ],
        "title": "StoryAnalysisGateResponse",
        "type": "object"
      },
      "StoryAnalysisRunRequest": {
        "additionalProperties": false,
        "description": "Trigger a full story intelligence analysis run.",
        "properties": {
          "idempotency_key": {
            "anyOf": [
              {
                "maxLength": 140,
                "minLength": 3,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Idempotency Key"
          },
          "source_text": {
            "anyOf": [
              {
                "maxLength": 200000,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Text"
          },
          "source_type": {
            "default": "text",
            "enum": [
              "text",
              "document",
              "transcript"
            ],
            "title": "Source Type",
            "type": "string"
          },
          "target_language": {
            "default": "en",
            "maxLength": 16,
            "minLength": 2,
            "title": "Target Language",
            "type": "string"
          }
        },
        "title": "StoryAnalysisRunRequest",
        "type": "object"
      },
      "StoryAnalysisRunResponse": {
        "additionalProperties": false,
        "description": "Summary view of one story analysis run.",
        "properties": {
          "analyzed_at_utc": {
            "title": "Analyzed At Utc",
            "type": "string"
          },
          "beat_count": {
            "minimum": 1.0,
            "title": "Beat Count",
            "type": "integer"
          },
          "event_count": {
            "minimum": 1.0,
            "title": "Event Count",
            "type": "integer"
          },
          "insight_count": {
            "minimum": 1.0,
            "title": "Insight Count",
            "type": "integer"
          },
          "owner_id": {
            "title": "Owner Id",
            "type": "string"
          },
          "quality_gate": {
            "$ref": "#/components/schemas/StoryAnalysisGateResponse"
          },
          "run_id": {
            "title": "Run Id",
            "type": "string"
          },
          "schema_version": {
            "title": "Schema Version",
            "type": "string"
          },
          "segment_count": {
            "minimum": 1.0,
            "title": "Segment Count",
            "type": "integer"
          },
          "source_language": {
            "title": "Source Language",
            "type": "string"
          },
          "story_id": {
            "title": "Story Id",
            "type": "string"
          },
          "target_language": {
            "title": "Target Language",
            "type": "string"
          },
          "theme_count": {
            "minimum": 0.0,
            "title": "Theme Count",
            "type": "integer"
          }
        },
        "required": [
          "run_id",
          "story_id",
          "owner_id",
          "schema_version",
          "analyzed_at_utc",
          "source_language",
          "target_language",
          "segment_count",
          "event_count",
          "beat_count",
          "theme_count",
          "insight_count",
          "quality_gate"
        ],
        "title": "StoryAnalysisRunResponse",
        "type": "object"
      },
      "StoryBlueprint": {
        "additionalProperties": false,
        "description": "Portable story contract users can edit via web or Python.",
        "properties": {
          "canon_rules": {
            "items": {
              "type": "string"
            },
            "title": "Canon Rules",
            "type": "array"
          },
          "chapters": {
            "items": {
              "$ref": "#/components/schemas/ChapterBlock"
            },
            "title": "Chapters",
            "type": "array"
          },
          "characters": {
            "items": {
              "$ref": "#/components/schemas/CharacterBlock"
            },
            "title": "Characters",
            "type": "array"
          },
          "premise": {
            "maxLength": 4000,
            "minLength": 1,
            "title": "Premise",
            "type": "string"
          },
          "themes": {
            "items": {
              "$ref": "#/components/schemas/ThemeBlock"
            },
            "title": "Themes",
            "type": "array"
          }
        },
        "required": [
          "premise"
        ],
        "title": "StoryBlueprint",
        "type": "object"
      },
      "StoryCreateRequest": {
        "additionalProperties": false,
        "description": "Create one story workspace for the authenticated user.",
        "properties": {
          "blueprint": {
            "$ref": "#/components/schemas/StoryBlueprint"
          },
          "title": {
            "maxLength": 300,
            "minLength": 1,
            "title": "Title",
            "type": "string"
          }
        },
        "required": [
          "title",
          "blueprint"
        ],
        "title": "StoryCreateRequest",
        "type": "object"
      },
      "StoryFeatureRowResponse": {
        "additionalProperties": false,
        "description": "Feature metrics extracted for one chapter.",
        "properties": {
          "avg_sentence_length": {
            "title": "Avg Sentence Length",
            "type": "number"
          },
          "chapter_index": {
            "title": "Chapter Index",
            "type": "integer"
          },
          "chapter_key": {
            "title": "Chapter Key",
            "type": "string"
          },
          "dialogue_line_ratio": {
            "title": "Dialogue Line Ratio",
            "type": "number"
          },
          "schema_version": {
            "title": "Schema Version",
            "type": "string"
          },
          "sentence_count": {
            "title": "Sentence Count",
            "type": "integer"
          },
          "source_length_chars": {
            "title": "Source Length Chars",
            "type": "integer"
          },
          "story_id": {
            "title": "Story Id",
            "type": "string"
          },
          "token_count": {
            "title": "Token Count",
            "type": "integer"
          },
          "top_keywords": {
            "items": {
              "type": "string"
            },
            "title": "Top Keywords",
            "type": "array"
          }
        },
        "required": [
          "schema_version",
          "story_id",
          "chapter_key",
          "chapter_index",
          "source_length_chars",
          "sentence_count",
          "token_count",
          "avg_sentence_length",
          "dialogue_line_ratio",
          "top_keywords"
        ],
        "title": "StoryFeatureRowResponse",
        "type": "object"
      },
      "StoryFeatureRunResponse": {
        "additionalProperties": false,
        "description": "Latest persisted feature extraction result for one story.",
        "properties": {
          "chapter_features": {
            "items": {
              "$ref": "#/components/schemas/StoryFeatureRowResponse"
            },
            "title": "Chapter Features",
            "type": "array"
          },
          "extracted_at_utc": {
            "title": "Extracted At Utc",
            "type": "string"
          },
          "owner_id": {
            "title": "Owner Id",
            "type": "string"
          },
          "run_id": {
            "title": "Run Id",
            "type": "string"
          },
          "schema_version": {
            "title": "Schema Version",
            "type": "string"
          },
          "story_id": {
            "title": "Story Id",
            "type": "string"
          }
        },
        "required": [
          "run_id",
          "story_id",
          "owner_id",
          "schema_version",
          "extracted_at_utc",
          "chapter_features"
        ],
        "title": "StoryFeatureRunResponse",
        "type": "object"
      },
      "StoryResponse": {
        "additionalProperties": false,
        "description": "Story payload returned by the API.",
        "properties": {
          "blueprint": {
            "$ref": "#/components/schemas/StoryBlueprint"
          },
          "created_at_utc": {
            "title": "Created At Utc",
            "type": "string"
          },
          "owner_id": {
            "title": "Owner Id",
            "type": "string"
          },
          "story_id": {
            "title": "Story Id",
            "type": "string"
          },
          "title": {
            "title": "Title",
            "type": "string"
          },
          "updated_at_utc": {
            "title": "Updated At Utc",
            "type": "string"
          }
        },
        "required": [
          "story_id",
          "owner_id",
          "title",
          "blueprint",
          "created_at_utc",
          "updated_at_utc"
        ],
        "title": "StoryResponse",
        "type": "object"
      },
      "StoryUpdateRequest": {
        "additionalProperties": false,
        "description": "Update title and blueprint for an existing story workspace.",
        "properties": {
          "blueprint": {
            "$ref": "#/components/schemas/StoryBlueprint"
          },
          "title": {
            "maxLength": 300,
            "minLength": 1,
            "title": "Title",
            "type": "string"
          }
        },
        "required": [
          "title",
          "blueprint"
        ],
        "title": "StoryUpdateRequest",
        "type": "object"
      },
      "ThemeBlock": {
        "additionalProperties": false,
        "description": "Theme unit used in blueprint-driven story planning.",
        "properties": {
          "key": {
            "maxLength": 120,
            "minLength": 1,
            "title": "Key",
            "type": "string"
          },
          "priority": {
            "default": 1,
            "maximum": 10.0,
            "minimum": 1.0,
            "title": "Priority",
            "type": "integer"
          },
          "statement": {
            "maxLength": 1000,
            "minLength": 1,
            "title": "Statement",
            "type": "string"
          }
        },
        "required": [
          "key",
          "statement"
        ],
        "title": "ThemeBlock",
        "type": "object"
      },
      "UserResponse": {
        "additionalProperties": false,
        "description": "Public user profile returned from authenticated endpoints.",
        "properties": {
          "created_at_utc": {
            "title": "Created At Utc",
            "type": "string"
          },
          "display_name": {
            "title": "Display Name",
            "type": "string"
          },
          "email": {
            "title": "Email",
            "type": "string"
          },
          "user_id": {
            "title": "User Id",
            "type": "string"
          }
        },
        "required": [
          "user_id",
          "email",
          "display_name",
          "created_at_utc"
        ],
        "title": "UserResponse",
        "type": "object"
      },
      "ValidationError": {
        "properties": {
          "ctx": {
            "title": "Context",
            "type": "object"
          },
          "input": {
            "title": "Input"
          },
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "title": "Location",
            "type": "array"
          },
          "msg": {
            "title": "Message",
            "type": "string"
          },
          "type": {
            "title": "Error Type",
            "type": "string"
          }
        },
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError",
        "type": "object"
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "scheme": "bearer",
        "type": "http"
      }
    }
  },
  "info": {
    "description": "Story intelligence API for auth, story workspaces, analysis runs, and dashboard read models.\n\nUse `/docs` for interactive Swagger UI while the service is running. A static OpenAPI snapshot is published with repository docs for hosted browsing.",
    "summary": "Local/dev HTTP API for story_gen",
    "title": "story_gen API",
    "version": "0.3.0"
  },
  "openapi": "3.1.0",
  "paths": {
    "/api/v1": {
      "get": {
        "description": "List API runtime mode and available endpoint surfaces.",
        "operationId": "api_v1_root_api_v1_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiRootResponse"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Api V1 Root",
        "tags": [
          "api"
        ]
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "description": "Authenticate credentials and issue a time-limited bearer token.",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AuthLoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthTokenResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Login",
        "tags": [
          "auth"
        ]
      }
    },
    "/api/v1/auth/register": {
      "post": {
        "description": "Create a local user account for bearer-token authentication.",
        "operationId": "register_api_v1_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AuthRegisterRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Register",
        "tags": [
          "auth"
        ]
      }
    },
    "/api/v1/essays": {
      "get": {
        "description": "List owner-scoped essay workspaces with a bounded limit.",
        "operationId": "list_essays_api_v1_essays_get",
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 100,
              "maximum": 500,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/EssayResponse"
                  },
                  "title": "Response List Essays Api V1 Essays Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "List Essays",
        "tags": [
          "essays"
        ]
      },
      "post": {
        "description": "Create one owner-scoped essay workspace and optional draft text.",
        "operationId": "create_essay_api_v1_essays_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EssayCreateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EssayResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Create Essay",
        "tags": [
          "essays"
        ]
      }
    },
    "/api/v1/essays/{essay_id}": {
      "get": {
        "description": "Read one owner-scoped essay workspace by identifier.",
        "operationId": "get_essay_api_v1_essays__essay_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "essay_id",
            "required": true,
            "schema": {
              "title": "Essay Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EssayResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Get Essay",
        "tags": [
          "essays"
        ]
      },
      "put": {
        "description": "Update title, policy blueprint, and draft for one essay workspace.",
        "operationId": "update_essay_api_v1_essays__essay_id__put",
        "parameters": [
          {
            "in": "path",
            "name": "essay_id",
            "required": true,
            "schema": {
              "title": "Essay Id",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EssayUpdateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EssayResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Update Essay",
        "tags": [
          "essays"
        ]
      }
    },
    "/api/v1/essays/{essay_id}/evaluate": {
      "post": {
        "description": "Run deterministic essay quality checks and return scored findings.",
        "operationId": "evaluate_essay_api_v1_essays__essay_id__evaluate_post",
        "parameters": [
          {
            "in": "path",
            "name": "essay_id",
            "required": true,
            "schema": {
              "title": "Essay Id",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EssayEvaluateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EssayEvaluationResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Evaluate Essay",
        "tags": [
          "essays"
        ]
      }
    },
    "/api/v1/me": {
      "get": {
        "description": "Return the authenticated user's profile.",
        "operationId": "me_api_v1_me_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Me",
        "tags": [
          "auth"
        ]
      }
    },
    "/api/v1/stories": {
      "get": {
        "description": "List owner-scoped story workspaces with a bounded limit.",
        "operationId": "list_stories_api_v1_stories_get",
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 100,
              "maximum": 500,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/StoryResponse"
                  },
                  "title": "Response List Stories Api V1 Stories Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "List Stories",
        "tags": [
          "stories"
        ]
      },
      "post": {
        "description": "Create one owner-scoped story workspace from a validated blueprint.",
        "operationId": "create_story_api_v1_stories_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StoryCreateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoryResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Create Story",
        "tags": [
          "stories"
        ]
      }
    },
    "/api/v1/stories/{story_id}": {
      "get": {
        "description": "Read one owner-scoped story workspace by identifier.",
        "operationId": "get_story_api_v1_stories__story_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoryResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Get Story",
        "tags": [
          "stories"
        ]
      },
      "put": {
        "description": "Update title and blueprint for one owner-scoped story.",
        "operationId": "update_story_api_v1_stories__story_id__put",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StoryUpdateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoryResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Update Story",
        "tags": [
          "stories"
        ]
      }
    },
    "/api/v1/stories/{story_id}/analysis/latest": {
      "get": {
        "description": "Fetch the latest persisted analysis run summary for a story.",
        "operationId": "get_latest_analysis_api_v1_stories__story_id__analysis_latest_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoryAnalysisRunResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Get Latest Analysis",
        "tags": [
          "stories",
          "analysis"
        ]
      }
    },
    "/api/v1/stories/{story_id}/analysis/run": {
      "post": {
        "description": "Run ingestion + analysis pipeline and persist a new analysis artifact.",
        "operationId": "run_analysis_api_v1_stories__story_id__analysis_run_post",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StoryAnalysisRunRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoryAnalysisRunResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Run Analysis",
        "tags": [
          "stories",
          "analysis"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/arcs": {
      "get": {
        "description": "Return arc points for character, conflict, and emotion trajectories.",
        "operationId": "dashboard_arcs_api_v1_stories__story_id__dashboard_arcs_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DashboardArcPointResponse"
                  },
                  "title": "Response Dashboard Arcs Api V1 Stories  Story Id  Dashboard Arcs Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Arcs",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/drilldown/{item_id}": {
      "get": {
        "description": "Return detail content and evidence references for one dashboard item.",
        "operationId": "dashboard_drilldown_api_v1_stories__story_id__dashboard_drilldown__item_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "item_id",
            "required": true,
            "schema": {
              "title": "Item Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardDrilldownResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Drilldown",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/graph": {
      "get": {
        "description": "Return graph nodes and edges for interactive dashboard rendering.",
        "operationId": "dashboard_graph_api_v1_stories__story_id__dashboard_graph_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardGraphResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Graph",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/graph/export.png": {
      "get": {
        "description": "Return deterministic PNG export of latest dashboard graph.",
        "operationId": "dashboard_graph_export_png_api_v1_stories__story_id__dashboard_graph_export_png_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardGraphPngExportResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Graph Export Png",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/graph/export.svg": {
      "get": {
        "description": "Return deterministic SVG export of latest dashboard graph.",
        "operationId": "dashboard_graph_export_svg_api_v1_stories__story_id__dashboard_graph_export_svg_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardGraphExportResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Graph Export Svg",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/overview": {
      "get": {
        "description": "Return high-level dashboard cards for the latest story analysis.",
        "operationId": "dashboard_overview_api_v1_stories__story_id__dashboard_overview_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardOverviewResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Overview",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/themes/heatmap": {
      "get": {
        "description": "Return theme-by-stage heatmap cells for the latest analysis.",
        "operationId": "dashboard_theme_heatmap_api_v1_stories__story_id__dashboard_themes_heatmap_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DashboardThemeHeatmapCellResponse"
                  },
                  "title": "Response Dashboard Theme Heatmap Api V1 Stories  Story Id  Dashboard Themes Heatmap Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Theme Heatmap",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/themes/heatmap/export.png": {
      "get": {
        "description": "Render latest theme heatmap as deterministic PNG payload.",
        "operationId": "dashboard_theme_heatmap_export_png_api_v1_stories__story_id__dashboard_themes_heatmap_export_png_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardPngExportResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Theme Heatmap Export Png",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/themes/heatmap/export.svg": {
      "get": {
        "description": "Render latest theme heatmap as deterministic SVG payload.",
        "operationId": "dashboard_theme_heatmap_export_svg_api_v1_stories__story_id__dashboard_themes_heatmap_export_svg_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardSvgExportResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Theme Heatmap Export Svg",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/timeline": {
      "get": {
        "description": "Return timeline lanes in narrative and chronological views.",
        "operationId": "dashboard_timeline_api_v1_stories__story_id__dashboard_timeline_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DashboardTimelineLaneResponse"
                  },
                  "title": "Response Dashboard Timeline Api V1 Stories  Story Id  Dashboard Timeline Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Timeline",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/timeline/export.png": {
      "get": {
        "description": "Render latest timeline lanes as deterministic PNG payload.",
        "operationId": "dashboard_timeline_export_png_api_v1_stories__story_id__dashboard_timeline_export_png_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardPngExportResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Timeline Export Png",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/timeline/export.svg": {
      "get": {
        "description": "Render latest timeline lanes as deterministic SVG payload.",
        "operationId": "dashboard_timeline_export_svg_api_v1_stories__story_id__dashboard_timeline_export_svg_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardSvgExportResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Timeline Export Svg",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/v1/overview": {
      "get": {
        "description": "Return high-level dashboard cards for the latest story analysis.",
        "operationId": "dashboard_overview_api_v1_stories__story_id__dashboard_v1_overview_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardOverviewResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Overview",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/v1/themes/heatmap": {
      "get": {
        "description": "Return theme-by-stage heatmap cells for the latest analysis.",
        "operationId": "dashboard_theme_heatmap_api_v1_stories__story_id__dashboard_v1_themes_heatmap_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DashboardThemeHeatmapCellResponse"
                  },
                  "title": "Response Dashboard Theme Heatmap Api V1 Stories  Story Id  Dashboard V1 Themes Heatmap Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Theme Heatmap",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/dashboard/v1/timeline": {
      "get": {
        "description": "Return timeline lanes in narrative and chronological views.",
        "operationId": "dashboard_timeline_api_v1_stories__story_id__dashboard_v1_timeline_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DashboardTimelineLaneResponse"
                  },
                  "title": "Response Dashboard Timeline Api V1 Stories  Story Id  Dashboard V1 Timeline Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Dashboard Timeline",
        "tags": [
          "stories",
          "dashboard"
        ]
      }
    },
    "/api/v1/stories/{story_id}/features/extract": {
      "post": {
        "description": "Run deterministic feature extraction over story chapter content.",
        "operationId": "extract_features_api_v1_stories__story_id__features_extract_post",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoryFeatureRunResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Extract Features",
        "tags": [
          "stories",
          "features"
        ]
      }
    },
    "/api/v1/stories/{story_id}/features/latest": {
      "get": {
        "description": "Fetch the latest persisted feature extraction result for a story.",
        "operationId": "get_latest_features_api_v1_stories__story_id__features_latest_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoryFeatureRunResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Get Latest Features",
        "tags": [
          "stories",
          "features"
        ]
      }
    },
    "/api/v1/stories/{story_id}/ingestion/status": {
      "get": {
        "description": "Return latest ingestion job status for an owner-scoped story.",
        "operationId": "ingestion_status_api_v1_stories__story_id__ingestion_status_get",
        "parameters": [
          {
            "in": "path",
            "name": "story_id",
            "required": true,
            "schema": {
              "title": "Story Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IngestionStatusResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Ingestion Status",
        "tags": [
          "stories",
          "analysis"
        ]
      }
    },
    "/healthz": {
      "get": {
        "description": "Return service liveness metadata for probes.",
        "operationId": "healthz_healthz_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Healthz",
        "tags": [
          "system"
        ]
      }
    }
  },
  "tags": [
    {
      "description": "Service health and runtime metadata.",
      "name": "system"
    },
    {
      "description": "API discovery and root-level capability listing.",
      "name": "api"
    },
    {
      "description": "Registration, login, and profile lookups.",
      "name": "auth"
    },
    {
      "description": "Story workspace CRUD and ownership-scoped reads.",
      "name": "stories"
    },
    {
      "description": "Story feature extraction workflows.",
      "name": "features"
    },
    {
      "description": "Story intelligence extraction, translation, and scoring workflows.",
      "name": "analysis"
    },
    {
      "description": "Visualization-oriented dashboard read models.",
      "name": "dashboard"
    },
    {
      "description": "Essay workspace CRUD and deterministic quality checks.",
      "name": "essays"
    }
  ]
}
